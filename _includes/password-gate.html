<!-- Client-side password gate for staging environment -->
<script>
(function() {
  var STAGING_HOST = 'staging.gszep.com';
  var SESSION_KEY = 'staging-auth';
  var PASSWORD = 'preview';

  if (window.location.hostname !== STAGING_HOST) return;
  if (sessionStorage.getItem(SESSION_KEY) === 'ok') return;

  // Hide page immediately while gate is active
  document.documentElement.style.visibility = 'hidden';

  document.addEventListener('DOMContentLoaded', function() {
    // Create gate overlay
    var overlay = document.createElement('div');
    overlay.style.cssText = [
      'position:fixed', 'inset:0', 'z-index:99999',
      'background:#fff', 'display:flex', 'align-items:center',
      'justify-content:center', 'font-family:sans-serif'
    ].join(';');
    overlay.innerHTML =
      '<form id="gate-form" style="text-align:center;max-width:320px;width:100%;padding:2rem">' +
        '<h2 style="margin:0 0 0.5rem;font-size:1.25rem;font-weight:600">Staging Preview</h2>' +
        '<p style="margin:0 0 1.5rem;color:#666;font-size:0.875rem">Enter password to continue</p>' +
        '<input id="gate-password" type="password" placeholder="Password" autofocus ' +
          'style="width:100%;padding:0.625rem;border:1px solid #ccc;border-radius:4px;' +
          'font-size:1rem;margin-bottom:0.75rem;box-sizing:border-box">' +
        '<button type="submit" style="width:100%;padding:0.625rem;background:#333;' +
          'color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer">Enter</button>' +
        '<p id="gate-error" style="color:#c00;margin:0.75rem 0 0;font-size:0.875rem;display:none">' +
          'Incorrect password</p>' +
      '</form>';

    document.body.appendChild(overlay);
    document.documentElement.style.visibility = 'visible';

    document.getElementById('gate-form').addEventListener('submit', function(e) {
      e.preventDefault();
      var input = document.getElementById('gate-password');
      if (input.value === PASSWORD) {
        sessionStorage.setItem(SESSION_KEY, 'ok');
        overlay.remove();
        window.location.reload();
      } else {
        document.getElementById('gate-error').style.display = 'block';
        input.value = '';
        input.focus();
      }
    });
  });
})();
</script>
