---
import Base from '../layouts/Base.astro';
import Nav from '../components/ui/Nav.astro';
import Footer from '../components/ui/Footer.astro';
import ProjectCard from '../components/ui/ProjectCard.astro';
import CitationCard from '../components/ui/CitationCard.astro';
import site from '../data/site.json';
import citations from '../data/citations.json';
import { getCollection } from 'astro:content';

const projects = await getCollection('projects', ({ data }) => !data.draft);
projects.sort((a, b) => a.data.order - b.data.order);
---

<Base>
  <Nav />

  <!-- Hero -->
  <section
    class="min-h-screen flex items-center justify-center text-center bg-cover bg-center"
    style={`background-image: url(${site.heroImage})`}
    id="hero"
  >
    <div class="px-4">
      <h1 class="text-5xl md:text-7xl font-bold uppercase tracking-wide text-white">
        {site.title}
      </h1>
      <p class="text-gray-200 uppercase tracking-wide mt-4 text-lg">
        {site.description}
      </p>
      <hr class="border-gray-500 my-6 max-w-xs mx-auto" />
      <div class="flex flex-wrap justify-center gap-2">
        {site.tags.map((tag) => (
          <span class="bg-gray-600 text-white text-sm px-3 py-1 rounded">{tag}</span>
        ))}
      </div>
      <a
        href="#projects"
        class="inline-block mt-8 border border-white text-white px-6 py-2 rounded-full uppercase text-sm hover:bg-white hover:text-black transition-colors"
      >
        Scroll Down // Read More
      </a>
    </div>
  </section>

  <!-- Projects -->
  <section class="bg-gray-100 py-16" id="projects">
    <div class="max-w-6xl mx-auto px-4">
      <p class="text-center text-gray-500 uppercase tracking-wide font-medium mb-12">
        Creative
      </p>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-0">
        {projects.map((project) => (
          <ProjectCard
            title={project.data.title}
            description={project.data.description}
            image={project.data.image}
            href={`/projects/${project.slug}`}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- Publications -->
  <section class="bg-black py-16" id="publications">
    <div class="max-w-4xl mx-auto px-4">
      <p class="text-center text-gray-500 uppercase tracking-wide font-medium mb-12">
        Publications
      </p>
      <div class="space-y-4">
        {citations.map((cite) => (
          <CitationCard {...cite} />
        ))}
      </div>
    </div>
  </section>

  <Footer />
</Base>
